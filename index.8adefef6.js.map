{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,qBAC7BC,WAAYF,SAASC,cAAc,8BAG/BE,EAAU,IAAI,EAAAP,EAAAQ,SAOpB,SAASC,IACPP,EAAKC,KAAKO,UAAY,6BACtBH,EAAQI,cAAcC,MAAKC,KAK7B,SAAyBA,GACvBC,QAAQC,IAAIF,GACZX,EAAKC,KAAKO,UAAY,IAAIG,GACvBG,KAAIC,IACH,IAAIC,EAAU,GA+BpB,IAAkBC,EAAUC,EArBtB,OATIH,EAAMI,YA8BEF,EA5BRF,EAAMI,UA4BYD,EA3BlBE,KAAKC,MAAMC,aAAaC,QAAQ,WAFlCP,EA8BCC,EAASH,KAAIU,GACdN,EAAOO,MAAKC,GAASA,EAAMF,KAAOA,IAC7BN,EAAOO,MAAKC,GAASA,EAAMF,KAAOA,IAAIG,KAEtC,eA7BHX,EAAQY,OAAS,IACnBZ,EAAU,CAACA,EAAQ,GAAIA,EAAQ,GAAI,UAE9B,gCAAgCD,EAAMS,eAAeT,EAAMS,mGAG9DT,EAAMc,gIAGuBd,EAAMe,OAASf,EAAMY,kDACtBX,EAAQe,KAChC,mFAGIhB,EAAMiB,cACNjB,EAAMkB,gBACN,IACAC,MAAM,EAAG,oDAKtBH,KAAK,IArCNI,CAAgBxB,EAAOyB,YAT3B/B,EAAQgC,YAER9B,IAEAP,EAAKI,WAAWkC,iBAAiB,SAqDjC,SAAoBC,GAClB,GAAIA,EAAMC,SAAWxC,EAAKI,WACxB,OAEEmC,EAAMC,OAAOC,UAAUC,SAAS,mBAClCrC,EAAQsC,YACRpC,KAEEgC,EAAMC,OAAOC,UAAUC,SAAS,kBAClCrC,EAAQuC,WACRrC,MAGAgC,EAAMC,OAAOC,UAAUC,SAAS,iBAC/BH,EAAMC,OAAOC,UAAUC,SAAS,sBAChCH,EAAMC,OAAOC,UAAUC,SAAS,uBAEjCrC,EAAQwC,UAAUC,OAAOP,EAAMC,OAAOO,cACtCxC,KAEEgC,EAAMC,OAAOC,UAAUC,SAAS,kBAClCrC,EAAQ2C,WACRzC,KAEEgC,EAAMC,OAAOC,UAAUC,SAAS,kBAClCrC,EAAQ4C,UACR1C,KAEEgC,EAAMC,OAAOC,UAAUC,SAAS,uBAClCrC,EAAQ6C,WACR3C,KAEEgC,EAAMC,OAAOC,UAAUC,SAAS,uBAClCrC,EAAQ8C,UACR5C,KAGEgC,EAAMC,OAAOC,UAAUC,SAAS,mBAC9BH,EAAMC,OAAOY,cAAcX,UAAUC,SAAS,uBAChDrC,EAAQ6C,WACR3C,KAEEgC,EAAMC,OAAOY,cAAcX,UAAUC,SAAS,uBAChDrC,EAAQ8C,UACR5C,S","sources":["src/js/movie-list.js"],"sourcesContent":["import TopMovies from './work-with-api';\n\nconst refs = {\n  list: document.querySelector('.movie-collection'),\n  pagination: document.querySelector('#tui-pagination-container'),\n};\n\nconst topList = new TopMovies();\ntopList.fetchGenr();\n\ngetMovies();\n\nrefs.pagination.addEventListener('click', changePage);\n\nfunction getMovies() {\n  refs.list.innerHTML = '<div class=\"loader\"></div>';\n  topList.fetchMovies().then(movies => {\n    topMoviesMarkUp(movies.results);\n  });\n}\n\nfunction topMoviesMarkUp(movies) {\n  console.log(movies);\n  refs.list.innerHTML = [...movies]\n    .map(movie => {\n      let movie_g = [];\n      if (movie.genre_ids) {\n        movie_g = getGenrs(\n          movie.genre_ids,\n          JSON.parse(localStorage.getItem('genres'))\n        );\n      }\n      if (movie_g.length > 2) {\n        movie_g = [movie_g[0], movie_g[1], 'Other'];\n      }\n      return `<li class=\"movies__item\" id=\"${movie.id}\" data-id=${movie.id}>\n    <a href=\"\" class=\"movies__link\">\n        <img src='https://image.tmdb.org/t/p/original${\n          movie.poster_path\n        }' class=\"movie__image\" alt=\"Movie\">\n        <div class=\"movie__text-part\">\n            <h2 class=\"movie__title\">${movie.title || movie.name}</h2>\n            <p class=\"movie__genre\">${movie_g.join(\n              ', '\n            )} <span class=\"stick\">|</span> \n                <span class=\"movie__year\">${(\n                  movie.release_date ||\n                  movie.first_air_date ||\n                  ''\n                ).slice(0, 4)}</span></p>\n        </div>\n    </a>\n</li>`;\n    })\n    .join('');\n}\nfunction getGenrs(genresID, genres) {\n  return genresID.map(id => {\n    if (genres.find(genre => genre.id === id)) {\n      return genres.find(genre => genre.id === id).name;\n    } else {\n      return 'Self made';\n    }\n  });\n}\nfunction changePage(event) {\n  if (event.target === refs.pagination) {\n    return;\n  }\n  if (event.target.classList.contains('tui-ico-first')) {\n    topList.resetPage();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-ico-last')) {\n    topList.lastPage();\n    getMovies();\n  }\n  if (\n    event.target.classList.contains('tui-page-btn') &&\n    !event.target.classList.contains('tui-next-is-ellip') &&\n    !event.target.classList.contains('tui-prev-is-ellip')\n  ) {\n    topList.cengePage(Number(event.target.textContent));\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-ico-next')) {\n    topList.nextPage();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-ico-prev')) {\n    topList.prePage();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-next-is-ellip')) {\n    topList.nextElip();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-prev-is-ellip')) {\n    topList.preElip();\n    getMovies();\n  }\n\n  if (event.target.classList.contains('tui-ico-ellip')) {\n    if (event.target.parentElement.classList.contains('tui-next-is-ellip')) {\n      topList.nextElip();\n      getMovies();\n    }\n    if (event.target.parentElement.classList.contains('tui-prev-is-ellip')) {\n      topList.preElip();\n      getMovies();\n    }\n  }\n}\n"],"names":["$aRcm3","parcelRequire","$7b2f36280afae82d$var$refs","list","document","querySelector","pagination","$7b2f36280afae82d$var$topList","default","$7b2f36280afae82d$var$getMovies","innerHTML","fetchMovies","then","movies","console","log","map","movie","movie_g","genresID","genres","genre_ids","JSON","parse","localStorage","getItem","id","find","genre","name","length","poster_path","title","join","release_date","first_air_date","slice","$7b2f36280afae82d$var$topMoviesMarkUp","results","fetchGenr","addEventListener","event","target","classList","contains","resetPage","lastPage","cengePage","Number","textContent","nextPage","prePage","nextElip","preElip","parentElement"],"version":3,"file":"index.8adefef6.js.map"}