{"mappings":"YAEsBA,SAASC,cAAc,WAA7C,MACMC,EAAgBF,SAASC,cAAc,UAE7C,IAAIE,EAAc,GAElBD,EAAcE,iBAAiB,SAASC,KAwBxCC,eAAiCC,GAC/B,aAAaC,MACX,uCAAuCD,6DAEtCE,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,UAEjBL,MAAKM,GACGA,KA/BXC,CAHoBX,EAAEY,OAAOC,QAAQ,wBACXC,aAAa,YAEdV,MAAKW,IACxBC,aAAaC,QAAQ,WACvBnB,EAAcoB,KAAKC,MAAMH,aAAaC,QAAQ,WAEhD,IAAIG,GAAgB,EACpB,IAAK,IAAIC,KAAMvB,EACb,GAAIuB,EAAGnB,KAAOa,EAAMb,GAAI,CACtBkB,GAAgB,EAChB,MAICA,IACHtB,EAAYwB,KAAKP,GACjBC,aAAaO,QAAQ,QAASL,KAAKM,UAAU1B,QAGjDD,EAAc4B,YAAc,qB","sources":["src/js/addtoqueue.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\n\nconst btnAddToWatch = document.querySelector('.wached');\nconst btnAddToQueue = document.querySelector('.queue');\n\nlet queueMovies = [];\n\nbtnAddToQueue.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n\n  fetchMovieDetails(movId).then(movie => {\n    if (localStorage.getItem('queue')) {\n      queueMovies = JSON.parse(localStorage.getItem('queue'));\n    }\n    let isMovieExists = false;\n    for (let el of queueMovies) {\n      if (el.id === movie.id) {\n        isMovieExists = true;\n        break;\n      }\n    }\n\n    if (!isMovieExists) {\n      queueMovies.push(movie);\n      localStorage.setItem('queue', JSON.stringify(queueMovies));\n    }\n  });\n  btnAddToQueue.textContent = 'Remove at queue';\n});\n\nasync function fetchMovieDetails(id) {\n  return await fetch(\n    `https://api.themoviedb.org/3//movie/${id}?api_key=7fea517bd5b294dd7a1b57e94e2c1c68&language=en-US`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    });\n}\n"],"names":["document","querySelector","$d07cb73238e86a3d$var$btnAddToQueue","$d07cb73238e86a3d$var$queueMovies","addEventListener","e","async","id","fetch","then","response","ok","Error","status","json","data","$d07cb73238e86a3d$var$fetchMovieDetails","target","closest","getAttribute","movie","localStorage","getItem","JSON","parse","isMovieExists","el","push","setItem","stringify","textContent"],"version":3,"file":"index.351ee4b7.js.map"}