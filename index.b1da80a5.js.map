{"mappings":"oeAEA,IAAAA,EAAAC,EAAA,eAAMC,EAAgBC,SAASC,cAAc,sBAK7CC,UAAY,IAAI,EAAAL,EAAAM,SAChB,IAAIC,EAAgB,GACpBL,EAAcM,iBAAiB,SAASC,KAmBxCC,eAAiCC,GAC/B,aAAaC,MACX,uCAAuCD,6DAEtCE,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,UAEjBL,MAAKM,GACGA,KA3BXC,CAFoBX,EAAEY,OAAOC,QAAQ,wBACXC,aAAa,YACdV,MAAKW,IAGJC,aAAaC,QAAQ,aACzBnB,EAAgBoB,KAAKC,MAAMH,aAAaC,QAAQ,aAEpEnB,EAAcsB,KAAKL,GACnBC,aAAaK,QAAQ,UAAWH,KAAKI,UAAUxB","sources":["src/js/addtowatched.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\n\nconst btnAddToWatch = document.querySelector('.modal__active-btn');\n\nimport TopMovies from './work-with-api.js';\n\n// const cardsList = document.querySelector('.movie-collection');\ntopMovies = new TopMovies();\nlet watchedMovies = [];\nbtnAddToWatch.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n  fetchMovieDetails(movId).then(movie => {\n    // movie.results.map(it => {\n    //   if (movId === it.id) {\n                        if (localStorage.getItem('watched')) { \n                        watchedMovies = JSON.parse(localStorage.getItem('watched')); \n                    }\n    watchedMovies.push(movie);\n    localStorage.setItem('watched', JSON.stringify(watchedMovies));\n    //   }\n    // });\n  });\n});\n\n\n\n\nasync function fetchMovieDetails(id) {\n  return await fetch(\n    `https://api.themoviedb.org/3//movie/${id}?api_key=7fea517bd5b294dd7a1b57e94e2c1c68&language=en-US`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    });\n}\n"],"names":["$kKeZA","parcelRequire","$6ffe36c1bd17d9d1$var$btnAddToWatch","document","querySelector","topMovies","default","$6ffe36c1bd17d9d1$var$watchedMovies","addEventListener","e","async","id","fetch","then","response","ok","Error","status","json","data","$6ffe36c1bd17d9d1$var$fetchMovieDetails","target","closest","getAttribute","movie","localStorage","getItem","JSON","parse","push","setItem","stringify"],"version":3,"file":"index.b1da80a5.js.map"}