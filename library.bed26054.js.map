{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACTC,WAAYC,SAASC,cAAc,uBACnCC,KAAMF,SAASC,cAAc,qBAC7BE,gBAAiBH,SAASC,cAAc,oBAGtCG,EAAgB,IAAI,EAAAR,EAAAS,SAGpBC,EAAwBC,KAAKC,MAAMC,aAAaC,QAAQ,YAE9DZ,EAAKC,WAAWY,iBAAiB,SAEjC,WACEP,EAAcQ,YACXC,MAAKC,IAOV,IAAyBC,EAAQC,EANnBV,IAMWS,EALGT,EAKKU,EALkBF,EAAME,OAMvDlB,EAAKI,KAAKe,UAAYF,EACnBG,KAAIC,IACH,IAAIC,EA0BV,SAAkBJ,GAChB,OAAOA,EAAOE,KAAIJ,GACTA,EAAMO,OA5BGC,CAASN,GAIrB,OAHEI,EAAQG,OAAS,IACnBH,EAAU,CAACA,EAAQ,GAAIA,EAAQ,GAAI,UAE5B,gCAAgCD,EAAMK,eAAeL,EAAMK,mGAGhEL,EAAMM,gIAGuBN,EAAMO,mDACPN,EAAQO,KAChC,kFAE8BR,EAAMS,aAAaC,MAC7C,EACA,oDAMbF,KAAK","sources":["src/js/watched-button.js"],"sourcesContent":["import TopMovies from './work-with-api.js';\n\nconst refs = {\n    watchedBtn: document.querySelector('.header_btn-watched'),\n    list: document.querySelector('.movie-collection'),\n    addToWatchedBtn: document.querySelector('.modal__btn-add'),\n};\n\nconst topMoviesList = new TopMovies();\n\n\nconst filmsFromLocalStorage = JSON.parse(localStorage.getItem('watched'));\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n\nfunction onWatchedBtnClick() {\n  topMoviesList.fetchGenr()\n    .then(genre => {\n          if (filmsFromLocalStorage) {\n            topMoviesMarkUp(filmsFromLocalStorage, genre.genres);\n        }\n    })\n};\n\nfunction topMoviesMarkUp(movies, genres) {\n  refs.list.innerHTML = movies\n    .map(movie => {\n      let movie_g = getGenrs(genres);\n      if (movie_g.length > 2) {\n        movie_g = [movie_g[0], movie_g[1], 'Other'];\n      }\n        return `<li class=\"movies__item\" id=\"${movie.id}\" data-id=${movie.id}>\n    <a href=\"\" class=\"movies__link\">\n        <img src='https://image.tmdb.org/t/p/original${\n          movie.poster_path\n        }' class=\"movie__image\" alt=\"Movie\">\n        <div class=\"movie__text-part\">\n            <h2 class=\"movie__title\">${movie.title}</h2>\n            <p class=\"movie__genre\">${movie_g.join(\n              ', '\n            )} <span class=\"stick\">|</span> \n                <span class=\"movie__year\">${movie.release_date.slice(\n                  0,\n                  4\n                )}</span></p>\n        </div>\n    </a>\n</li>`;\n    })\n    .join('');\n}\n\n\nfunction getGenrs(genres) {\n  return genres.map(genre => {\n    return genre.name\n  });\n}\n"],"names":["$kKeZA","parcelRequire","$a1027229eaaf7cd3$var$refs","watchedBtn","document","querySelector","list","addToWatchedBtn","$a1027229eaaf7cd3$var$topMoviesList","default","$a1027229eaaf7cd3$var$filmsFromLocalStorage","JSON","parse","localStorage","getItem","addEventListener","fetchGenr","then","genre","movies","genres","innerHTML","map","movie","movie_g","name","$a1027229eaaf7cd3$var$getGenrs","length","id","poster_path","title","join","release_date","slice"],"version":3,"file":"library.bed26054.js.map"}