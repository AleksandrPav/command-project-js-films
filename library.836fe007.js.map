{"mappings":"AAAA,MAAMA,KAAOC,SAASC,cAAc,qBAC9BC,aAAeF,SAASC,cAAc,wBACtCE,UAAYH,SAASC,cAAc,wBACnCG,SAAWJ,SAASC,cAAc,iBAClCI,UAAYF,UAAUF,cAAc,gBAK1CK,eAAeC,UAAUC,GAEvB,GADAA,EAAEC,iBACED,EAAEE,SAAWX,KAAM,CACrB,MAAMY,EAAUH,EAAEE,OAAOE,QAAQ,iBAAiBC,QAAQC,GAC1DX,UAAUY,aAAa,UAAWJ,GAClCN,UAAUW,gBAAkBC,kBAAkBN,GAASO,MAAKC,IAC1D,MAAMC,eACJA,EAAcC,aACdA,EAAYC,WACZA,EAAUC,YACVA,EAAWC,WACXA,EAAUC,OACVA,EAAMC,SACNA,EAAQZ,GACRA,GACEK,EACJ,MAAO,kEACkDI,WAAqBH,4EACpCA,EAAeO,wEACZb,uMAGYO,cAAyBC,0NAI/BE,EAAWI,QAC9C,+NAKmCR,EAAeO,iOAIfE,eACnCJ,yLAOFC,2CAMlBxB,aAAa4B,UAAUC,IAAI,+BAC3B5B,UAAU2B,UAAUC,IAAI,uBACxB3B,SAAS4B,iBAAiB,QAASC,YACnC/B,aAAa8B,iBAAiB,QAASE,gBACvCC,OAAOH,iBAAiB,UAAWI,eAQrC,SAASF,eAAe1B,GAClBA,EAAEE,SAAWR,eACfA,aAAamC,oBAAoB,QAASH,gBAC1ChC,aAAa4B,UAAUQ,OAAO,+BAC9BnC,UAAU2B,UAAUQ,OAAO,wBAI/B,SAASL,WAAWzB,GACdA,EAAEE,SAAWN,WACfA,SAASiC,oBAAoB,QAASJ,YACtC/B,aAAa4B,UAAUQ,OAAO,+BAC9BnC,UAAU2B,UAAUQ,OAAO,wBAI/B,SAASF,cAAc5B,GACH,KAAdA,EAAE+B,UACJJ,OAAOE,oBAAoB,UAAWD,eACtClC,aAAa4B,UAAUQ,OAAO,+BAC9BnC,UAAU2B,UAAUQ,OAAO,wBAI/BhC,eAAeW,kBAAkBH,GAC/B,aAAa0B,MACX,uCAAuC1B,6DAEtCI,MAAKuB,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,UAEjB3B,MAAKC,GACGA,IAIb,SAASU,eAAeJ,GACtB,OAAsB,IAAlBA,EAAOqB,OACF,GACErB,EAAOqB,OAAS,EAClB,GAAGrB,EAAO,GAAGsB,SAAStB,EAAO,GAAGsB,cAEhC,GAAG,CAACtB,EAAOuB,KAAIC,GAASA,EAAMF,QAAOG,KAAK,QA5GrDnD,KAAKiC,iBAAiB,QAASzB","sources":["src/js/modal.js"],"sourcesContent":["const btns = document.querySelector('.movie-collection');\nconst modalOverlay = document.querySelector('.modal__card-overlay');\nconst modalCard = document.querySelector('.modal__card-content');\nconst closeBtn = document.querySelector('.modal__close');\nconst modalInfo = modalCard.querySelector('.modal__info');\n\n\n\nbtns.addEventListener('click', showModal);\nasync function showModal(e) {\n  e.preventDefault();\n  if (e.target !== btns) {\n    const movieId = e.target.closest('.movies__item').dataset.id;\n    modalCard.setAttribute('data-id', movieId);\n    modalInfo.innerHTML = await fetchMovieDetails(movieId).then(data => {\n      const {\n        original_title,\n        vote_average,\n        vote_count,\n        poster_path,\n        popularity,\n        genres,\n        overview,\n        id,\n      } = data;\n      return `\n                <img src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${original_title} \" class=\"modal__img\" />\n                <h2 class=\"modal__info-title\">${original_title.toUpperCase()}</h2>\n                <ul class=\"discription__modal id=${id}\">\n                  <li class=\"discription__modal-item\">\n                    <p class=\"discription__modal-title\">Vote / Votes</p>\n                    <p class=\"discription__modal-text\"><span>${vote_average}</span> / ${vote_count}</p>\n                  </li>\n                  <li class=\"discription__modal-item\">\n                    <p class=\"discription__modal-title\">Popularity</p>\n                    <p class=\"discription__modal-text\">${popularity.toFixed(\n                      1\n                    )}</p>\n                  </li>\n                  <li class=\"discription__modal-item\">\n                    <p class=\"discription__modal-title\">Original Title</p>\n                    <p class=\"discription__modal-text\">${original_title.toUpperCase()}</p>\n                  </li>\n                  <li class=\"discription__modal-item\">\n                    <p class=\"discription__modal-title\">Genre</p>\n                    <p class=\"discription__modal-text\">${checkGenreList(\n                      genres\n                    )}</p>\n                  </li>\n                </ul>\n\n                <h4 class=\"about__modal-title\">About</h4>\n                <p class=\"about__modal-text\">\n                  ${overview}\n                </p>\n            `;\n    });\n  }\n  closeBtn;\n  modalOverlay.classList.add('modal__card-overlay--active');\n  modalCard.classList.add('modal__card--active');\n  closeBtn.addEventListener('click', closeByBtn);\n  modalOverlay.addEventListener('click', closeByOverlay);\n  window.addEventListener('keydown', closeByWindow);\n}\n\n// let path = e.currentTarget.getAttribute('data-path');\n// modalCard.classList.remove('modal__card--active');\n// document.querySelector(`[data-target=\"${path}\"]`).classList.add('modal__card--active');\n// modalOverlay.classList.add('modal__card-overlay--active');\n\nfunction closeByOverlay(e) {\n  if (e.target === modalOverlay) {\n    modalOverlay.removeEventListener('click', closeByOverlay);\n    modalOverlay.classList.remove('modal__card-overlay--active');\n    modalCard.classList.remove('modal__card--active');\n  }\n}\n\nfunction closeByBtn(e) {\n  if (e.target === closeBtn) {\n    closeBtn.removeEventListener('click', closeByBtn);\n    modalOverlay.classList.remove('modal__card-overlay--active');\n    modalCard.classList.remove('modal__card--active');\n  }\n}\n\nfunction closeByWindow(e) {\n  if (e.keyCode === 27) {\n    window.removeEventListener('keydown', closeByWindow);\n    modalOverlay.classList.remove('modal__card-overlay--active');\n    modalCard.classList.remove('modal__card--active');\n  }\n}\n\nasync function fetchMovieDetails(id) {\n  return await fetch(\n    `https://api.themoviedb.org/3//movie/${id}?api_key=7fea517bd5b294dd7a1b57e94e2c1c68&language=en-US`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    });\n}\n\nfunction checkGenreList(genres) {\n  if (genres.length === 0) {\n    return '';\n  } else if (genres.length > 2) {\n    return `${genres[0].name}, ${genres[1].name}, Other`;\n  } else {\n    return `${[genres.map(genre => genre.name)].join(', ')}`;\n  }\n}\n"],"names":["btns","document","querySelector","modalOverlay","modalCard","closeBtn","modalInfo","async","showModal","e","preventDefault","target","movieId","closest","dataset","id","setAttribute","innerHTML","fetchMovieDetails","then","data","original_title","vote_average","vote_count","poster_path","popularity","genres","overview","toUpperCase","toFixed","checkGenreList","classList","add","addEventListener","closeByBtn","closeByOverlay","window","closeByWindow","removeEventListener","remove","keyCode","fetch","response","ok","Error","status","json","length","name","map","genre","join"],"version":3,"file":"library.836fe007.js.map"}