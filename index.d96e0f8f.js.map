{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,qBAC7BC,WAAYF,SAASC,cAAc,8BAG/BE,EAAU,IAAI,EAAAP,EAAAQ,SAMpB,SAASC,IACPP,EAAKC,KAAKO,UAAY,6BACtBH,EAAQI,cAAcC,MAAKC,IACzBN,EAAQO,YAAYF,MAAKG,KAM7B,SAAyBF,EAAQG,GAC/Bd,EAAKC,KAAKO,UAAYG,EACnBI,KAAIC,IACH,IAAIC,EAuBV,SAAkBC,EAAUJ,GAC1B,OAAOI,EAASH,KAAII,GACdL,EAAOM,MAAKC,GAASA,EAAMF,KAAOA,IAC7BL,EAAOM,MAAKC,GAASA,EAAMF,KAAOA,IAAIG,KAEtC,cA5BOC,CAASP,EAAMQ,UAAWV,GAIxC,OAHIG,EAAQQ,OAAS,IACnBR,EAAU,CAACA,EAAQ,GAAIA,EAAQ,GAAI,UAE9B,gCAAgCD,EAAMG,eAAeH,EAAMG,mGAG9DH,EAAMU,gIAGuBV,EAAMW,OAASX,EAAMM,kDACtBL,EAAQW,KAChC,mFAGIZ,EAAMa,cAAgBb,EAAMc,gBAC5BC,MAAM,EAAG,oDAKtBH,KAAK,IA7BJI,CAAgBrB,EAAOsB,QAASpB,EAAUC,cARhDP,IAEAP,EAAKI,WAAW8B,iBAAiB,SA8CjC,SAAoBC,GAClB,GAAIA,EAAMC,SAAWpC,EAAKI,WACxB,OAEE+B,EAAMC,OAAOC,UAAUC,SAAS,mBAClCjC,EAAQkC,YACRhC,KAEE4B,EAAMC,OAAOC,UAAUC,SAAS,kBAClCjC,EAAQmC,WACRjC,MAGA4B,EAAMC,OAAOC,UAAUC,SAAS,iBAC/BH,EAAMC,OAAOC,UAAUC,SAAS,sBAChCH,EAAMC,OAAOC,UAAUC,SAAS,uBAEjCjC,EAAQoC,UAAUC,OAAOP,EAAMC,OAAOO,cACtCpC,KAEE4B,EAAMC,OAAOC,UAAUC,SAAS,kBAClCjC,EAAQuC,WACRrC,KAEE4B,EAAMC,OAAOC,UAAUC,SAAS,kBAClCjC,EAAQwC,UACRtC,KAEE4B,EAAMC,OAAOC,UAAUC,SAAS,uBAClCjC,EAAQyC,WACRvC,KAEE4B,EAAMC,OAAOC,UAAUC,SAAS,uBAClCjC,EAAQ0C,UACRxC,KAGE4B,EAAMC,OAAOC,UAAUC,SAAS,mBAC9BH,EAAMC,OAAOY,cAAcX,UAAUC,SAAS,uBAChDjC,EAAQyC,WACRvC,KAEE4B,EAAMC,OAAOY,cAAcX,UAAUC,SAAS,uBAChDjC,EAAQ0C,UACRxC,S","sources":["src/js/movie-list.js"],"sourcesContent":["import TopMovies from './work-with-api';\n\nconst refs = {\n  list: document.querySelector('.movie-collection'),\n  pagination: document.querySelector('#tui-pagination-container'),\n};\n\nconst topList = new TopMovies();\n\ngetMovies();\n\nrefs.pagination.addEventListener('click', changePage);\n\nfunction getMovies() {\n  refs.list.innerHTML = '<div class=\"loader\"></div>';\n  topList.fetchMovies().then(movies => {\n    topList.fetchGenr().then(generlist => {\n      topMoviesMarkUp(movies.results, generlist.genres);\n    });\n  });\n}\n\nfunction topMoviesMarkUp(movies, genres) {\n  refs.list.innerHTML = movies\n    .map(movie => {\n      let movie_g = getGenrs(movie.genre_ids, genres);\n      if (movie_g.length > 2) {\n        movie_g = [movie_g[0], movie_g[1], 'Other'];\n      }\n      return `<li class=\"movies__item\" id=\"${movie.id}\" data-id=${movie.id}>\n    <a href=\"\" class=\"movies__link\">\n        <img src='https://image.tmdb.org/t/p/original${\n          movie.poster_path\n        }' class=\"movie__image\" alt=\"Movie\">\n        <div class=\"movie__text-part\">\n            <h2 class=\"movie__title\">${movie.title || movie.name}</h2>\n            <p class=\"movie__genre\">${movie_g.join(\n              ', '\n            )} <span class=\"stick\">|</span> \n                <span class=\"movie__year\">${(\n                  movie.release_date || movie.first_air_date\n                ).slice(0, 4)}</span></p>\n        </div>\n    </a>\n</li>`;\n    })\n    .join('');\n}\nfunction getGenrs(genresID, genres) {\n  return genresID.map(id => {\n    if (genres.find(genre => genre.id === id)) {\n      return genres.find(genre => genre.id === id).name;\n    } else {\n      return 'Self made';\n    }\n  });\n}\nfunction changePage(event) {\n  if (event.target === refs.pagination) {\n    return;\n  }\n  if (event.target.classList.contains('tui-ico-first')) {\n    topList.resetPage();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-ico-last')) {\n    topList.lastPage();\n    getMovies();\n  }\n  if (\n    event.target.classList.contains('tui-page-btn') &&\n    !event.target.classList.contains('tui-next-is-ellip') &&\n    !event.target.classList.contains('tui-prev-is-ellip')\n  ) {\n    topList.cengePage(Number(event.target.textContent));\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-ico-next')) {\n    topList.nextPage();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-ico-prev')) {\n    topList.prePage();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-next-is-ellip')) {\n    topList.nextElip();\n    getMovies();\n  }\n  if (event.target.classList.contains('tui-prev-is-ellip')) {\n    topList.preElip();\n    getMovies();\n  }\n\n  if (event.target.classList.contains('tui-ico-ellip')) {\n    if (event.target.parentElement.classList.contains('tui-next-is-ellip')) {\n      topList.nextElip();\n      getMovies();\n    }\n    if (event.target.parentElement.classList.contains('tui-prev-is-ellip')) {\n      topList.preElip();\n      getMovies();\n    }\n  }\n}\n"],"names":["$aRcm3","parcelRequire","$7b2f36280afae82d$var$refs","list","document","querySelector","pagination","$7b2f36280afae82d$var$topList","default","$7b2f36280afae82d$var$getMovies","innerHTML","fetchMovies","then","movies","fetchGenr","generlist","genres","map","movie","movie_g","genresID","id","find","genre","name","$7b2f36280afae82d$var$getGenrs","genre_ids","length","poster_path","title","join","release_date","first_air_date","slice","$7b2f36280afae82d$var$topMoviesMarkUp","results","addEventListener","event","target","classList","contains","resetPage","lastPage","cengePage","Number","textContent","nextPage","prePage","nextElip","preElip","parentElement"],"version":3,"file":"index.d96e0f8f.js.map"}