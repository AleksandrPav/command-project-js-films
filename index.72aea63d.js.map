{"mappings":"oeACAA,EAAA,SAEA,MAAMC,EAAgBC,SAASC,cAAc,sBAI7C,IAAIC,EAAgB,GACpBH,EAAcI,iBAAiB,SAASC,KAgBxCC,eAAiCC,GAC/B,aAAaC,MACX,uCAAuCD,6DAEtCE,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,UAEjBL,MAAKM,GACGA,KAxBXC,CAFoBX,EAAEY,OAAOC,QAAQ,wBACXC,aAAa,YACdV,MAAKW,IAGxBC,aAAaC,QAAQ,aACvBnB,EAAgBoB,KAAKC,MAAMH,aAAaC,QAAQ,aAElDnB,EAAcsB,KAAKL,GACnBC,aAAaK,QAAQ,UAAWH,KAAKI,UAAUxB","sources":["src/js/addtowatched.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\nimport TopMovies from './work-with-api.js';\n\nconst btnAddToWatch = document.querySelector('.modal__active-btn');\n\n// const cardsList = document.querySelector('.movie-collection');\n//topMovies = new TopMovies();\nlet watchedMovies = [];\nbtnAddToWatch.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n  fetchMovieDetails(movId).then(movie => {\n    // movie.results.map(it => {\n    //   if (movId === it.id) {\n    if (localStorage.getItem('watched')) {\n      watchedMovies = JSON.parse(localStorage.getItem('watched'));\n    }\n    watchedMovies.push(movie);\n    localStorage.setItem('watched', JSON.stringify(watchedMovies));\n    //   }\n    // });\n  });\n});\n\nasync function fetchMovieDetails(id) {\n  return await fetch(\n    `https://api.themoviedb.org/3//movie/${id}?api_key=7fea517bd5b294dd7a1b57e94e2c1c68&language=en-US`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    });\n}\n"],"names":["parcelRequire","$6ffe36c1bd17d9d1$var$btnAddToWatch","document","querySelector","$6ffe36c1bd17d9d1$var$watchedMovies","addEventListener","e","async","id","fetch","then","response","ok","Error","status","json","data","$6ffe36c1bd17d9d1$var$fetchMovieDetails","target","closest","getAttribute","movie","localStorage","getItem","JSON","parse","push","setItem","stringify"],"version":3,"file":"index.72aea63d.js.map"}