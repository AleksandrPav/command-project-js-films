{"mappings":"oeACA,IAAAA,EAAAC,EAAA,S,aAEA,MAAMC,EAAgBC,SAASC,cAAc,WACvCC,EAAgBF,SAASC,cAAc,UAI3B,IAAI,EAAAJ,EAAAM,SAEtB,IAAIC,EAAgB,GAEpBL,EAAcM,iBAAiB,SAASC,KA0BxCC,eAAiCC,GAC/B,aAAaC,MACX,uCAAuCD,6DAEtCE,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,UAEjBL,MAAKM,GACGA,KAjCXC,CAHoBX,EAAEY,OAAOC,QAAQ,wBACXC,aAAa,YAEdV,MAAKW,IACxBC,aAAaC,QAAQ,aACvBnB,EAAgBoB,KAAKC,MAAMH,aAAaC,QAAQ,aAElD,IAAIG,GAAgB,EACpB,IAAK,IAAIC,KAAMvB,EACb,GAAIuB,EAAGnB,KAAOa,EAAMb,GAAI,CACtBkB,GAAgB,EAChB,MAICA,IACHtB,EAAcwB,KAAKP,GACnBC,aAAaO,QAAQ,UAAWL,KAAKM,UAAU1B,QAGnDF,EAAc6B,UAAUC,OAAO,qBAC/BjC,EAAcgC,UAAUE,IAAI,qBAC5BlC,EAAcmC,YAAc","sources":["src/js/addtowatched.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\nimport TopMovies from './work-with-api.js';\n\nconst btnAddToWatch = document.querySelector('.wached');\nconst btnAddToQueue = document.querySelector('.queue');\n\nimport TopMovies from './work-with-api.js';\n\nconst topMovies = new TopMovies();\n\nlet watchedMovies = [];\n\nbtnAddToWatch.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n\n  fetchMovieDetails(movId).then(movie => {\n    if (localStorage.getItem('watched')) {\n      watchedMovies = JSON.parse(localStorage.getItem('watched'));\n    }\n    let isMovieExists = false;\n    for (let el of watchedMovies) {\n      if (el.id === movie.id) {\n        isMovieExists = true;\n        break;\n      }\n    }\n\n    if (!isMovieExists) {\n      watchedMovies.push(movie);\n      localStorage.setItem('watched', JSON.stringify(watchedMovies));\n    }\n  });\n  btnAddToQueue.classList.remove('modal__active-btn');\n  btnAddToWatch.classList.add('modal__active-btn');\n  btnAddToWatch.textContent = 'Remove at Watched';\n});\n\nasync function fetchMovieDetails(id) {\n  return await fetch(\n    `https://api.themoviedb.org/3//movie/${id}?api_key=7fea517bd5b294dd7a1b57e94e2c1c68&language=en-US`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    });\n}\n"],"names":["$kKeZA","parcelRequire","$6ffe36c1bd17d9d1$var$btnAddToWatch","document","querySelector","$6ffe36c1bd17d9d1$var$btnAddToQueue","default","$6ffe36c1bd17d9d1$var$watchedMovies","addEventListener","e","async","id","fetch","then","response","ok","Error","status","json","data","$6ffe36c1bd17d9d1$var$fetchMovieDetails","target","closest","getAttribute","movie","localStorage","getItem","JSON","parse","isMovieExists","el","push","setItem","stringify","classList","remove","add","textContent"],"version":3,"file":"index.215bf4f6.js.map"}