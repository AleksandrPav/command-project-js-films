{"mappings":"AAEsBA,SAASC,cAAc,WAA7C,MACMC,EAAgBF,SAASC,cAAc,UAE7C,IAAIE,EAAc,GAElBD,EAAcE,iBAAiB,SAASC,KA6BxCC,eAAiCC,GAC/B,aAAaC,MACX,uCAAuCD,6DAEtCE,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,UAEjBL,MAAKM,GACGA,KApCXC,CAHoBX,EAAEY,OAAOC,QAAQ,wBACXC,aAAa,YAEdV,MAAKW,IACxBC,aAAaC,QAAQ,WACvBnB,EAAcoB,KAAKC,MAAMH,aAAaC,QAAQ,WAEhD,IAAIG,GAAgB,EACpB,IAAK,IAAIC,KAAMvB,EACb,GAAIuB,EAAGnB,KAAOa,EAAMb,GAAI,CACtBkB,GAAgB,EAChB,MAICA,IA6BT,SAAyBlB,GACvB,MACMoB,EADQJ,KAAKC,MAAMH,aAAaC,QAAQ,UACvBM,QAAOF,GAAMA,EAAGnB,KAAOA,IAC9Cc,aAAaQ,QAAQ,QAASN,KAAKO,UAAUH,IA1BzCI,CAAgBX,EAAMb,IAC1BL,EAAc8B,YAAc,iBANxB7B,EAAY8B,KAAKb,GACjBC,aAAaQ,QAAQ,QAASN,KAAKO,UAAU3B,IACjDD,EAAc8B,YAAc","sources":["src/js/addtoqueue.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\n\nconst btnAddToWatch = document.querySelector('.wached');\nconst btnAddToQueue = document.querySelector('.queue');\n\nlet queueMovies = [];\n\nbtnAddToQueue.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n\n  fetchMovieDetails(movId).then(movie => {\n    if (localStorage.getItem('queue')) {\n      queueMovies = JSON.parse(localStorage.getItem('queue'));\n    }\n    let isMovieExists = false;\n    for (let el of queueMovies) {\n      if (el.id === movie.id) {\n        isMovieExists = true;\n        break;\n      }\n    }\n\n    if (!isMovieExists) {\n      queueMovies.push(movie);\n      localStorage.setItem('queue', JSON.stringify(queueMovies));\n  btnAddToQueue.textContent = 'remove from queue';\n\n    } else {\n      removeFromQueue(movie.id);\n  btnAddToQueue.textContent = 'add to queue';\n    }\n  });\n  // btnAddToQueue.textContent = 'add to queue';\n});\n\nasync function fetchMovieDetails(id) {\n  return await fetch(\n    `https://api.themoviedb.org/3//movie/${id}?api_key=7fea517bd5b294dd7a1b57e94e2c1c68&language=en-US`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    });\n}\n\n\nfunction removeFromQueue(id) {\n  const films = JSON.parse(localStorage.getItem('queue'));\n  const filtered = films.filter(el => el.id !== id);\n  localStorage.setItem('queue', JSON.stringify(filtered));\n}"],"names":["document","querySelector","$b48e09543541a962$var$btnAddToQueue","$b48e09543541a962$var$queueMovies","addEventListener","e","async","id","fetch","then","response","ok","Error","status","json","data","$b48e09543541a962$var$fetchMovieDetails","target","closest","getAttribute","movie","localStorage","getItem","JSON","parse","isMovieExists","el","filtered","filter","setItem","stringify","$b48e09543541a962$var$removeFromQueue","textContent","push"],"version":3,"file":"library.7b246270.js.map"}